<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAIN</title>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
<header>
    <div class="topbar">
        <nav class="menu">
            <a href="/list">PRODUCTION</a>
            <a> | </a>
            <a href="/material">MATERIAL</a>
        </nav>
        <div class="user-info">
            <p>USER ID(SQL)</p>
            <button type="submit" class="logout">Log out</button>
        </div>
    </div>
</header>

<main>
    <h2>Manufacturing List</h2>

    <table class="board-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Model</th>
            <th>Order Status</th>
            <th>Process Type</th>
            <th>Progress</th>
            <th>Quantity</th>
            <th>Start Date</th>
            <th>End Date</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="order, stat : ${orders}">
            <td th:text="${order.id}"></td>
            <td><a href="#" th:text="${order.carModel}"></a></td>
            <td th:text="${order.orderStatus}"></td>
            <td th:text="${order.processType}"></td>
            <td class="progress-cell">
                <div class="progress-bar-container">
                    <div class="progress-bar"
                         th:style="'width:' + ${order.progress} + '%; background-color:' + (${order.progress} &lt; 50 ? 'red' : 'green')">
                    </div>
                </div>
                <span class="progress-text" th:text="${order.progress} + '%'"></span>
            </td>
            <td th:text="${order.quantity}"></td>
            <td th:text="${order.startDate}"></td>
            <td th:text="${order.endDate}"></td>
        </tr>
        </tbody>
    </table>
    <hr>
    <footer>
        <button class="btn2" id="orderBtn">주문 접수</button>

        <!-- 검색 기능 -->
        <div class="search-container">
            <select id="searchType" class="select">
                <option value="id">ID</option>
                <option value="carModel">Model</option>
                <option value="orderStatus">Order Status</option>
                <option value="processType">Process Type</option>
                <option value="progress">Progress</option>
                <option value="quantity">Quantity</option>
            </select>
            <input type="text" id="searchInput" class="search-box" placeholder="Search">
            <button class="btn" id="searchBtn">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </footer>
</main>

<!-- 주문 접수 팝업 -->
<div id="orderPopup" class="popup">
    <div class="popup-content">
        <span class="close-btn" id="closePopup">&times;</span>
        <h2>주문 접수</h2>
        <form id="orderForm">
            <label for="carModel">모델명:</label>
            <input type="text" id="carModel" name="carModel" required>

            <label for="quantity">수량:</label>
            <input type="number" id="quantity" name="quantity" required>

            <button type="submit" class="submit-btn">등록</button>
            <button type="button" class="submit-btn" id="cancelBtn">취소</button>
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // 팝업 표시
        $('#orderBtn').click(function() {
        $('#orderPopup').fadeIn();  // 팝업 표시
   });

   // 팝업 숨기기
        $('#closePopup').click(function() {
        $('#orderPopup').fadeOut();  // 팝업 숨기기
   });

   // 취소 버튼 클릭 시 팝업 숨기기
        $('#cancelBtn').click(function() {
        $('#orderPopup').fadeOut();  // 팝업 숨기기
   });

   // 팝업 닫기
       $('#orderPopup').fadeOut();  // 팝업 숨기기

</script>
</body>
</html>